{% extends "MgatePersonneBundle::layout.html.twig" %}

{% block title %}
    {{ 'prospect.prospect_display'|trans({}, 'person') }} {{ parent() }}
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('css/datatables/dataTables.bootstrap.css') }}">
    <link rel="stylesheet" href="{{ asset('css/datatables/dataTables.fontAwesome.css') }}">
    <link rel="stylesheet" href="{{ asset('css/datatables/responsive.bootstrap.min.css') }}">
{% endblock %}

{% block content_title %}
    {{ 'prospect.prospect_display'|trans({}, 'person') }}
{% endblock %}

{% block breadcrumb %}
    <ul class="breadcrumb no-margin pull-right">
        <li><a href="{{ path('MgatePersonne_prospect_homepage') }}">{{ 'prospect.prospect_list'|trans({}, 'person') }}</a></li>
        <li class="active">{{ prospect.nom }}</li>
    </ul>
{% endblock %}

{% block content_bundle %}
    <h2>{{ prospect.nom }}</h2>
    <em><h4>{{ 'prospect.fields.type'|trans({}, 'person') }} : {{ prospect.EntiteToString }}</h4></em>
    <p>
    <h4>{{ 'prospect.fields.address'|trans({}, 'person') }} : {{ prospect.adresse }}
        <br>
        {{ prospect.codePostal }} {{ prospect.ville }}
    </h4>
    </p>

    <div class="nav-tabs-custom">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#tab1" data-toggle="tab">{{ 'employee.employees'|trans({}, 'person') }}</a></li>
            <li><a href="#tab2" data-toggle="tab">{{ 'study.studies'|trans({}, 'person') }}</a></li>
            <li><a href="#tab3" data-toggle="tab">{{ 'prospect.mailing_list'|trans({}, 'person') }}</a></li>
            <li><a href="#tab4" data-toggle="tab">{{ 'prospect.comments'|trans({}, 'person') }}</a></li>
        </ul>
        <div class="tab-content">
            <!-- Liste des employÃ©s -->
            <div class="tab-pane active" id="tab1">
                {% include "MgatePersonneBundle:Prospect:TabVoir/employes.html.twig" %}
            </div>
            <!-- Etudes faites avec ce prospect -->
            <div class="tab-pane" id="tab2" style="min-height:200px;">
                {% include "MgatePersonneBundle:Prospect:TabVoir/etudes.html.twig" %}
            </div>
            <!-- Mailing list -->
            <div class="tab-pane" id="tab3">
                {% include "MgatePersonneBundle:Prospect:TabVoir/mailing.html.twig" %}
            </div>
            <!-- commentaires (fos rest) -->
            <div class="tab-pane" id="tab4">
                {% include 'FOSCommentBundle:Thread:async.html.twig' with {'id': prospect.thread.id} %}
            </div>
        </div>
    </div>
{% endblock %}

{% block javascript %}
    {{ parent() }}
    <script src="{{ asset('js/datatables/jquery.dataTables.min.js') }}"></script>
    <script src="{{ asset('js/datatables/dataTables.bootstrap.min.js') }}"></script>
    <script src="{{ asset('js/datatables/dataTables.responsive.min.js') }}"></script>
    <script src="{{ asset('js/datatables/responsive.bootstrap.min.js') }}"></script>

    <script type="text/javascript" charset="utf-8">
        $(document).ready(function () {
            $('#employes').dataTable({
                "searching": false,
                "bPaginate": false,
                "bAutoWidth": false,
                "aaSorting": [[0, 'asc']]
            });
        });
        $(document).ready(function () {
            $('#etudes').dataTable({
                responsive: true,
                "searching": false,
                "bPaginate": false,
                "bAutoWidth": false,
                "aaSorting": [[0, 'asc']]
            });
        });
    </script>
{% endblock %}

